<script type="text/x-red" data-template-name="pubnub in">
    <div class="form-row">
        <label for="node-input-keys"><i class="fa fa-globe"></i> Keys</label>
        <input type="text" id="node-input-keys">
    </div>
    <div class="form-row">
        <label for="node-input-channel"><i class="fa fa-tasks"></i> Channel</label>
        <input type="text" id="node-input-channel" placeholder="node-red">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
    <div class="form-tips">You may listen to a list of comma-separated channels - ch1,ch2,etc.</div>
</script>

<script type="text/x-red" data-help-name="pubnub in">
    <p>Subscribes to the PubNub channel (or comma-separated list of channels) specified by the edit window and outputs the received content to <b>msg.payload</b></p>
    <p>You may listen to a list of comma-separated channels - ch1,ch2,etc.</p>
    <p>Messages published on that channel will appear on the <code>msg.payload</code> at the output,
    while <code>msg.channel</code> will contain the name of the channel the message was published on.
</script>

<script type="text/javascript">
    RED.nodes.registerType('pubnub in',{
        category: 'input',
        color:"#19a2c6",
        inputs:0,
        outputs:1,
        icon: "pnTiny.png",
        label: function() {
            return this.name ||"pubnub";
        },
        labelStyle: function() {
            return this.channel?"node_label_italic":"";
        },
        defaults: {
            keys: {type:"pubnub-keys",required:true},
            channel: {value:"node-red",required:true},
            name: {value:""}
        }
    });
</script>


<script type="text/x-red" data-template-name="pubnub out">
    <div class="form-row">
        <label for="node-input-keys"><i class="fa fa-globe"></i> Keys</label>
        <input type="text" id="node-input-keys">
    </div>
    <div class="form-row">
        <label for="node-input-channel"><i class="fa fa-tasks"></i> Channel</label>
        <input type="text" id="node-input-channel" placeholder="node-red">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
</script>

<script type="text/x-red" data-help-name="pubnub out">
    <p>Publishes <b>msg.payload</b> to the PubNub channel specified by the edit window.</p>
    <p>The <code>msg.payload</code> input may be a string or a JSON object</p>
</script>

<script type="text/javascript">
    RED.nodes.registerType('pubnub out',{
        category: 'output',
        color:"#19a2c6",
        inputs:1,
        outputs:0,
        icon: "pnTiny.png",
        align: "right",
        label: function() {
            return this.name ||"pubnub";
        },
        labelStyle: function() {
            return this.channel?"node_label_italic":"";
        },
        defaults: {
            keys: {type:"pubnub-keys",required:true},
            channel: {value:"node-red",required:true},
            name: {value:""}
        }
    });
</script>


<script type="text/x-red" data-template-name="pubnub-keys">
    <div class="form-row">
        <label for="node-config-input-publish_key"><i class="fa fa-tag"></i> Publish Key</label>
        <input type="text" id="node-config-input-publish_key">
    </div>
    <div class="form-row">
        <label for="node-config-input-subscribe_key"><i class="fa fa-tag"></i> Subscribe Key</label>
        <input type="text" id="node-config-input-subscribe_key">
    </div>
    <div class="form-row">
        <label for="node-config-input-auth_key"><i class="fa fa-tag"></i> Auth Key</label>
        <input type="password" id="node-config-input-auth_key">
    </div>
    <div class="form-row">
        <label for="node-config-input-cipher_key"><i class="fa fa-tag"></i> Cipher Key</label>
        <input type="password" id="node-config-input-cipher_key">
    </div>
    <div class="form-row">
        <label><i class="fa fa-lock"></i>&nbsp;</label>
        <input type="checkbox" id="node-config-input-ssl" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-config-input-ssl">SSL</label>
    </div>
    <div class="form-row">
        <label for="node-config-input-uuid"><i class="fa fa-user"></i> UUID</label>
        <input type="text" id="node-config-input-uuid">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('pubnub-keys',{
        category: 'config',
        defaults: { },
        credentials: {
            publish_key: {value:"demo",required:true},
            subscribe_key: {value:"demo",required:true},
            auth_key: {value:"demo"},
            cipher_key: {value:"demo"},
            ssl: {value:true},
            uuid: {value:null},
        },
        label: function() {
            return "PubNub"; //this.credentials.publish_key+"/"+this.credentials.subscribe_key;
        },
        exportable: false
    });
</script>
